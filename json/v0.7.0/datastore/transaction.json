{"id":"transaction","metadata":{"name":null,"description":null},"methods":[{"metadata":{"constructor":false,"name":"entity","source":"/lib/datastore/transaction.js#L27","description":"<p>@type <a data-custom-type=\"datastore/entity</p\"></a>>","examples":[],"resources":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"pb","source":"/lib/datastore/transaction.js#L30","description":"<p>@type <a data-custom-type=\"datastore/pb</p\"></a>>","examples":[],"resources":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"util","source":"/lib/datastore/transaction.js#L33","description":"<p>@type <a data-custom-type=\"common/util</p\"></a>>","examples":[],"resources":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"GOOGLE_APIS_HOST","source":"/lib/datastore/transaction.js#L36","description":"<p>@const {string} Host to send with API requests.</p>","examples":[],"resources":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"MODE_NON_TRANSACTIONAL","source":"/lib/datastore/transaction.js#L39","description":"<p>@const {string} Non-transaction mode key.</p>","examples":[],"resources":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"MODE_TRANSACTIONAL","source":"/lib/datastore/transaction.js#L42","description":"<p>@const {string} Transaction mode key.</p>","examples":[],"resources":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"Transaction","source":"/lib/datastore/transaction.js#L64","description":"<p>Build a Transaction object. Transactions will generally be built for you by <a data-custom-type=\"datastore/dataset\"></a>. When you need to run a transactional operation, you use <a data-custom-type=\"datastore/dataset#runInTransaction\"></a>.</p><p><em>Reference: {@link <a href=\"http://goo.gl/n4oSjt}\">http://goo.gl/n4oSjt}</a></em></p>","examples":[{"code":"var Connection = require('lib/common/connection.js').Connection;\nvar myConnection = new Connection({});\nvar transaction = new Transaction(myConnection, 'my-project-id');"}],"resources":[]},"params":[{"name":"conn","description":"- An authorized connection to Google Cloud Datastore.","types":["<a data-custom-type=\"common\"></a>","connection.Connection"]},{"name":"datasetId","description":"- Dataset ID. This is your project ID from the Google Developers Console. ","types":["string"]}],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"begin","source":"/lib/datastore/transaction.js#L92","description":"<p>Begin a remote transaction and identify the current transaction instance with the remote transaction&#39;s ID.</p>","examples":[{"code":"transaction.begin(function(err) {\n  // Perform Datastore operations as usual.\n  transaction.get(dataset.key(['Company', 123]), function(err, entity) {\n    // Commit the transaction.\n    transaction.finalize(function(err) {});\n\n    // Rollback the transaction.\n    transaction.rollback(function(err) {});\n  });\n});"}],"resources":[]},"params":[{"name":"callback","description":"- The function to execute within the context of a transaction. ","types":["function"]}],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"rollback","source":"/lib/datastore/transaction.js#L121","description":"<p>Reverse a transaction remotely and finalize the current transaction instance.</p>","examples":[{"code":"transaction.begin(function(err) {\n  transaction.rollback(function(err) {\n    if (err) {\n      // Transaction could not be rolled back.\n    }\n  });\n});"}],"resources":[]},"params":[{"name":"callback","description":"- The callback function. ","types":["function"]}],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"commit","source":"/lib/datastore/transaction.js#L150","description":"<p>Commit the remote transaction and finalize the current transaction instance.</p>","examples":[{"code":"transaction.begin(function(err) {\n  transaction.commit(function(err) {\n    if (err) {\n      // Transaction could not be committed.\n    }\n  });\n});"}],"resources":[]},"params":[{"name":"callback","description":"- The callback function. ","types":["function"]}],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"finalize","source":"/lib/datastore/transaction.js#L179","description":"<p>Commit a transaction if it&#39;s not finalized yet.</p>","examples":[{"code":"transaction.begin(function(err) {\n  transaction.finalize(function(err) {\n    if (err) {\n      // Transaction could not be finalized.\n    }\n  });\n});"}],"resources":[]},"params":[{"name":"callback","description":"- The callback function. ","types":["function"]}],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"get","source":"/lib/datastore/transaction.js#L207","description":"<p>Retrieve the entities identified with the specified key(s) in the current transaction. Get operations require a valid key to retrieve the key-identified entity from Datastore.</p>","examples":[{"code":"// These examples work with both a Transaction object and a Dataset object.\n\n// Get a single entity.\ntransaction.get(dataset.key(['Company', 123]), function(err, entity) {});\n\n// Get multiple entities at once.\ntransaction.get([\n  dataset.key(['Company', 123]),\n  dataset.key(['Product', 'Computer'])\n], function(err, entities) {});"}],"resources":[]},"params":[{"name":"key","description":"- Datastore key object(s).","types":["Key","Key[]"]},{"name":"callback","description":"- The callback function. ","types":["function"]}],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"save","source":"/lib/datastore/transaction.js#L283","description":"<p>Insert or update the specified object(s) in the current transaction. If a key is incomplete, its associated object is inserted and its generated identifier is returned to the callback.</p>","examples":[{"code":"// These examples work with both a Transaction object and a Dataset object.\n\n// Save a single entity.\ntransaction.save({\n  key: dataset.key('Company'),\n  data: {\n    rating: '10'\n  }\n}, function(err, key) {\n  // Because we gave an incomplete key as an argument, `key` will be\n  // populated with the complete, generated key.\n});\n\n// Save multiple entities at once.\ntransaction.save([\n  {\n    key: dataset.key(['Company', 123]),\n    data: {\n      HQ: 'Dallas, TX'\n    }\n  },\n  {\n    key: dataset.key(['Product', 'Computer']),\n    data: {\n      vendor: 'Dell'\n    }\n  }\n], function(err, keys) {});"}],"resources":[]},"params":[{"name":"entities","description":"- Datastore key object(s).","types":["object","object[]"]},{"name":"entities.key","description":"- Datastore key object.","types":["Key"]},{"name":"entities.data","description":"- Data to save with the provided key.","types":["object"]},{"name":"callback","description":"- The callback function. ","types":["function"]}],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"delete","source":"/lib/datastore/transaction.js#L345","description":"<p>Delete all entities identified with the specified key(s) in the current transaction.</p>","examples":[{"code":"// These examples work with both a Transaction object and a Dataset object.\n\n// Delete a single entity.\ntransaction.delete(dataset.key(['Company', 123]), function(err) {});\n\n// Delete multiple entities at once.\ntransaction.delete([\n  dataset.key(['Company', 123]),\n  dataset.key(['Product', 'Computer'])\n], function(err) {});"}],"resources":[]},"params":[{"name":"key","description":"- Datastore key object(s).","types":["Key","Key[]"]},{"name":"callback","description":"- The callback function. ","types":["function"]}],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"runQuery","source":"/lib/datastore/transaction.js#L388","description":"<p>Datastore allows you to query entities by kind, filter them by property filters, and sort them by a property name. Projection and pagination are also supported. If more results are available, a query to retrieve the next page is provided to the callback function.</p>","examples":[{"code":"// Retrieve 5 companies.\ntransaction.runQuery(queryObject, function(err, entities, nextQuery) {\n  // `nextQuery` is not null if there are more results.\n  if (nextQuery) {\n    transaction.runQuery(nextQuery, function(err, entities, nextQuery) {});\n  }\n});"}],"resources":[]},"params":[{"name":"query","description":"- Query object.","types":["<a data-custom-type=\"datastore\"></a>","query"]},{"name":"callback","description":"- The callback function. ","types":["function"]}],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"mapQuery","source":"/lib/datastore/transaction.js#L424","description":"<p>mapQuery</p>","examples":[],"resources":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"constructor":false,"name":"makeReq","source":"/lib/datastore/transaction.js#L444","description":"<p>Make a request to the API endpoint.</p>","examples":[{"code":"var deleteRequest = {\n  MODE: 'NON_TRANSACTIONAL',\n  mutation: {\n    delete: [] // datastore key objects.\n  }\n};\ntransaction.makeReq('commit', deleteRequest, function(err) {});"}],"resources":[]},"params":[{"name":"method","description":"- Transaction action (allocateIds, commit, etc.).","types":["string"]},{"name":"req","description":"- Request configuration object.","types":["object"]},{"name":"callbcak","description":"- The callback function. ","types":["function"]}],"exceptions":[],"returns":[]}]}